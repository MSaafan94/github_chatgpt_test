<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Breadcrumbs of Timeoff -->
        <template id="portal_my_home_menu_leave" name="Portal layout : Leave menu entry"
                  inherit_id="portal.portal_breadcrumbs" priority="25">
            <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
                <li t-if="page_name == 'leave' or page_name == 'new_leave' or leave"
                    t-attf-class="breadcrumb-item #{'active ' if not leave or not pd else ''}">
                    <a t-attf-href="/my/leaves?{{ keep_query() }}">
                        Leaves
                    </a>
                    <t t-if="page_name == 'new_leave' ">
                        / New Leave Request
                    </t>
                </li>
                <li t-if="page_name == 'pd_request' or page_name == 'pd_request_new' or  pd"
                    t-attf-class="breadcrumb-item #{'active ' if page_name == 'pd_request_new' or  pd else ''}">
                    <a t-attf-href="/my/pd?{{ keep_query() }}">
                        PD Request
                    </a>

                </li>
                <li t-if="page_name == 'pr_request' or page_name == 'pr_request_new' or  pr"
                    t-attf-class="breadcrumb-item #{'active ' if page_name == 'pr_request_new' or  pr else ''}">
                    <a t-attf-href="/my/purchase_request?{{ keep_query() }}">
                        Requisition
                    </a>

                </li>
                <li t-if="page_name == 'pr_request_new'"
                    t-attf-class="breadcrumb-item">

                    New Requisition

                </li>
                <li t-if="page_name == 'reimbursement' or page_name == 'reimbursement_new' or  reimbursement"
                    t-attf-class="breadcrumb-item #{'active ' if page_name == 'reimbursement_new' or  reimbursement else ''}">
                    <a t-attf-href="/my/reimbursement?{{ keep_query() }}">
                        Reimbursement
                    </a>

                </li>
                <li t-if="page_name == 'reimbursement_new'"
                    t-attf-class="breadcrumb-item">

                    New Reimbursement

                </li>
                <li t-if="leave or pd or pr" class="breadcrumb-item">
                    <span t-if="leave" t-field="leave.name"/>
                    <span t-if="pd" t-field="pd.pd_activity"/>
                    <span t-if="pr" t-field="pr.sequence"/>
                </li>
            </xpath>
        </template>

        <template id="portal_my_leaves_details" name="My Leaves">
            <t t-call="portal.portal_layout">
                <t t-set="breadcrumbs_searchbar" t-value="True"/>
                <t t-call="portal.portal_searchbar">
                    <t t-set="title">Leaves</t>
                </t>
                <div class="row mt-2 mb-2">
                    <div class="col-12">
                        <a href="/my/leaves/submit" class="create_new btn bg-gradient-info">
                            <i class=" fas fa-calendar-plus"></i>
                            New Leave Request
                        </a>

                        <a href="/my/leaves/summary" style="margin-right: 5px;" class="btn  bg-gradient-info">
                            <i class="fas fa-calendar-alt"></i>
                            My Leaves Summary
                        </a>
                    </div>
                </div>


                <t t-if="not holidays">
                    <div class="alert alert-warning mt8" role="alert">
                        There are no Leave Requests.
                    </div>
                </t>
                <t t-if="holidays">
                    <t t-call="portal.portal_table">
                        <t t-foreach="holidays" t-as="leave">
                            <thead>
                                <tr t-attf-class="{{'thead-light' if not groupby == 'none' else ''}}">
                                    <th t-if="groupby == 'none'">Leave type</th>
                                    <th t-else="">
                                        <em class="font-weight-normal text-muted">Leave Type:</em>
                                        <span t-field="leave[0].holiday_status_id.name"/>
                                    </th>
                                    <th>Description</th>
                                    <th>Start date</th>
                                    <th>End date</th>
                                    <th>No of days</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="leave" t-as="leave">
                                    <tr>
                                        <td>

                                            <span t-field="leave.holiday_status_id.name"/>
                                        </td>
                                        <td>
                                            <i t-if="leave.name" data-trigger="click" type="button"
                                               class="fa fa-info-circle" data-toggle="tooltip" data-placement="top"
                                               t-att-title="leave.name">

                                            </i>

                                        </td>
                                        <td>
                                            <span t-field="leave.request_date_from"/>
                                        </td>
                                        <td>
                                            <span t-field="leave.request_date_to"/>
                                        </td>
                                        <td>
                                            <span t-field="leave.number_of_days"/>
                                        </td>
                                        <td>
                                            <span t-att-class="'badge badge-success' if leave.state=='validate' else ''
                                                           'badge badge-primary' if leave.state=='confirm' else ''
                                                           'badge badge-danger' if leave.state=='cancel' else ''
                                                           'badge badge-warning' if leave.state=='refuse' else ''
                                                           'badge badge-light' if leave.state=='draft' else ''
                                                           'badge badge-info' if leave.state=='validate1' else ''
                                                           " t-field="leave.state"/>
                                        </td>
                                        <td>
                                            <a style="    padding: 0px 2px 0px 2px;
    font-size: .75rem;
    display: inline-block;

    font-weight: 700;
    line-height: 1.5;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25rem;" t-attf-href="/my/leave/#{leave.id}" class="btn btn-success   btn-sm">
                                                <i class="fa fa-eye"></i>
                                                View
                                            </a>
                                            <a style="    padding: 0px 2px 0px 2px;
    font-size: .75rem;
    display: inline-block;

    font-weight: 700;
    line-height: 1.5;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25rem;" t-attf-href="/my/leave/delete/#{leave.id}" class="btn btn-danger btn-sm"
                                               t-if="leave.state in ('draft','confirm')">
                                                <i class="fa fa-trash"></i>
                                                Delete
                                            </a>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </t>
                    </t>
                </t>
            </t>
        </template>


        <template id="leave_request_submit" name="leaves: Submit a Request">

            <t t-call="portal.portal_layout">
                <br/>
                <div class="card card-info">
                    <div class="card-header">
                        <h3 class="card-title">New Leave Request</h3>
                    </div>
                    <!-- /.card-header -->
                    <!-- form start -->
                    <form action="/leave/insert" method="post" class="new_timeoff_form" id="leave_form">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="card-body o_portal_leaves_details">
                            <div class="form-group">
                                <label for="description">Description</label>
                                <input type="text" class="form-control name" name="name" required="required" />
                            </div>
                            <div class="form-group">
                                <label>Leave Type</label>
                                <select class="form-control holiday_status_id time_off_type_select" required="required" name="holiday_status_id">
                                    <option value="" selected="selected" disabled="disabled">Select Leave Type</option>
                                    <t t-foreach="leave_types" t-as="leave_type">
                                        <t t-if="leave_type[0] != 38">
                                            <option t-att-value="leave_type[0]">
                                                <t t-esc="leave_type[1]"/>
                                            </option>
                                        </t>
                                    </t>
                                </select>
                            </div>                            
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label class="control-label" for="date_from">From</label>
                                    <div class="input-group date">
                                        <input type="date" name="request_date_from" required="required"
                                               class="form-control date_from request_date_from"
                                               placeholder="DD/MM/YYYY"/>
                                        <div class="input-group-append">
                                            <span class="input-group-text">
                                                <span class="fa fa-calendar" role="img" aria-label="Calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="control-label" for="date_to">To</label>
                                    <div class="input-group date">
                                        <input type="date" name="request_date_to" required="required"
                                               class="form-control date_to request_date_to"
                                               placeholder="DD/MM/YYYY"/>
                                        <div class="input-group-append">
                                            <span class="input-group-text">
                                                <span class="fa fa-calendar" role="img" aria-label="Calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--                            <div class="form-group leave_documents">-->
                            <!--                                <label for="attachment">Document</label>-->
                            <!--                                <div class="input-group">-->
                            <!--                                    <input type="file" class="leave_document" id="leave_document" name="leave_document" multiple="multiple"/>-->
                            <!--                                </div>-->
                            <!--                            </div>-->

                            <div class="row">
                                <div class="form-group col-md-3 mt16 half_day_option">
                                    <label class="control-label"></label>
                                    <input type="checkbox" name="request_unit_half" id="half_day_input_id"
                                           class="request_unit_half">
                                        <label for="half_day" class="control-label">&#160;Half Day</label>
                                    </input>
                                </div>
                                <div class="form-group col-md-3 mt16 custom_hrs_option">
                                    <label class="control-label"></label>
                                    <input type="checkbox" name="request_unit_hours" id="unit_hours_input_id"
                                           class="request_unit_hours">
                                        <label for="unit_hours" class="control-label">&#160;Custom Hours</label>
                                    </input>
                                </div>
                                <div class="form-group col-md-3 mt16 custom_hour_divs" style="display:none;">
                                    <label class="control-label">From</label>
                                    <input type="time" name="request_hour_from"
                                           class="form-control select_period_select request_hour_from"/>

                                </div>
                                <div class="form-group col-md-3 mt16 custom_hour_divs" style="display:none;">
                                    <label class="control-label">To</label>
                                    <input type="time" name="request_hour_to"
                                           class="form-control select_period_select request_hour_to"/>


                                </div>
                                <div class="form-group col-md-3 mt16 from_period_div" id="from_period_div"
                                     style="display:none;">
                                    <label class="control-label">From Period</label>
                                    <select name="request_date_from_period"
                                            class="form-control request_date_from_period" id="select_from_period">
                                        <option value="am">Morning</option>
                                        <option value="pm">Afternoon</option>
                                    </select>
                                </div>
                            </div>
                            <t t-if="request.env.user.employee_id.job_category_id.is_teaching_stuff">

                                <div class="col-md-12">
                                    <div class="card card-info card-tabs">
                                        <div class="card-header p-2">
                                            <ul class="nav nav-pills card-title">
                                                <li class="nav-item">
                                                    <a class="nav-link active" href="#qualifiy_description"
                                                       data-toggle="tab">
                                                        Teaching Information
                                                    </a>
                                                </li>
                                            </ul>
                                            <div class="card-tools">
                                                <button type="button" class="btn btn-tool" data-card-widget="maximize">
                                                    <i class="fas fa-expand"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <!-- /.card-header -->
                                        <div class="card-body">
                                            <div class="tab-content">
                                                <div class="tab-pane show active" id="qualifiy_description"
                                                     role="tabpanel"
                                                     aria-labelledby="custom-content-below-home-tab">
                                                    <div class="row invoice-info" id="select-multi_container">
                                                        <div class="col-md-12 invoice-col">
                                                            <div class="form-group">
                                                                <label class="control-label col-sm-2" for="sub_id">
                                                                    Sub Teacher:
                                                                </label>
                                                                <select class="form-control select2-multi js-example-theme-multiple sub_id_select"
                                                                        multiple="multiple"
                                                                        name="sub_id[]"
                                                                >
                                                                    <option value="" selected="selected"
                                                                            disabled="disabled">Select Sub
                                                                    </option>
                                                                    <t t-foreach="sub_ids" t-as="sub">
                                                                        <option
                                                                                t-att-value="sub[0]">
                                                                            <t t-esc="sub[1]"/>
                                                                        </option>
                                                                    </t>
                                                                </select>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="supervision_duties">Supervision Duties
                                                                    :
                                                                </label>
                                                                <input type="text" name="supervision_duties"
                                                                       class="form-control supervision_duties"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="room_number">Room Number :</label>
                                                                <input type="text" name="room_number"
                                                                       class="form-control room_number"/>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="teaching_subject">Teaching Subject :</label>
                                                                <input type="text" name="teaching_subject"
                                                                       placeholder="if MS or Hs ; what blocks do you teach on this day?"
                                                                       class="form-control teaching_subject"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="rotation_day">Rotation Day :</label>
                                                                <input type="text" name="rotation_day"
                                                                       class="form-control rotation_day"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="Teaching_block">Teaching Block :</label>
                                                                <input type="text" name="Teaching_block"
                                                                       class="form-control Teaching_block"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="student_special_attention">Student Special
                                                                    Attention :
                                                                </label>
                                                                <input type="text" name="student_special_attention"
                                                                       placeholder="Are there any students that require special attention ?"
                                                                       class="form-control student_special_attention"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="medical_issues">Medical Issue :</label>
                                                                <input type="text" name="medical_issues"
                                                                       placeholder="Are there any medical issues we should be aware of ?"
                                                                       class="form-control medical_issues"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="teaching_stuff_note">Note :</label>
                                                                <input type="text" name="teaching_stuff_note"
                                                                       placeholder="would you like to add anything?"
                                                                       class="form-control teaching_stuff_note"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="lesson_plan_link">Lesson Plan Link</label>
                                                                <input type="text" class="form-control lesson_plan_link"
                                                                       id="lesson_plan_link"
                                                                       name="lesson_plan_link"/>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="lesson_plan_file">Lesson Plan :</label>
                                                                <input type="file" name="lesson_plan_file"
                                                                       id="lesson_plan_file" placeholder="please include an adequate lesson plan to suffice for the entire block.
                                                        if teaching several grades or subjects please include all lesson plans"
                                                                       class="form-control lesson_plan_file"/>
                                                                <input type="hidden" name="base64" id="base64"
                                                                       class="form-control base64_file"
                                                                       rows="5"></input>

                                                            </div>
                                                            <h5 class="mt-4 mb-2">Please Upload Attachment</h5>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <div class="form-group">
                                                                        <label for="attachment_1">Attachment 1</label>
                                                                        <div class="input-group ">
                                                                            <input type="file" name="attachment_1"
                                                                                   class="attachment_1"
                                                                            />
                                                                        </div>
                                                                        <input type="hidden" name="base641" id="base641"
                                                                               class="form-control base64_file1"
                                                                               rows="5"></input>
                                                                        <input type="hidden" name="file_name1"
                                                                               id="file_name1"
                                                                               class="form-control file_name1"
                                                                               rows="5"></input>
                                                                    </div>
                                                                    <!-- /input-group -->
                                                                </div>
                                                                <!-- /.col-lg-6 -->
                                                                <div class="col-lg-6">
                                                                    <div class="form-group">
                                                                        <label for="attachment_2">Attachment 2</label>
                                                                        <div class="input-group ">
                                                                            <input type="file" name="attachment_2"
                                                                                   class="attachment_2"/>
                                                                        </div>
                                                                        <input type="hidden" name="base642" id="base642"
                                                                               class="form-control base64_file2"
                                                                               rows="5"></input>
                                                                        <input type="hidden" name="file_name2"
                                                                               id="file_name2"
                                                                               class="form-control file_name2"
                                                                               rows="5"></input>
                                                                    </div>
                                                                    <!-- /input-group -->
                                                                </div>
                                                                <!-- /.col-lg-6 -->
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <div class="form-group">
                                                                        <label for="attachment_2">Attachment 3</label>
                                                                        <div class="input-group ">
                                                                            <input type="file" name="attachment_3"
                                                                                   class="attachment_3"
                                                                            />
                                                                        </div>
                                                                        <input type="hidden" name="base643" id="base643"
                                                                               class="form-control base64_file3"
                                                                               rows="5"></input>
                                                                        <input type="hidden" name="file_name3"
                                                                               id="file_name3"
                                                                               class="form-control file_name3"
                                                                               rows="5"></input>
                                                                    </div>
                                                                    <!-- /input-group -->
                                                                </div>
                                                                <!-- /.col-lg-6 -->
                                                                <div class="col-lg-6">
                                                                    <div class="form-group">
                                                                        <label for="attachment_4">Attachment 4</label>
                                                                        <div class="input-group ">
                                                                            <input type="file" name="attachment_4"
                                                                                   class="attachment_4"/>
                                                                        </div>
                                                                        <input type="hidden" name="base644" id="base644"
                                                                               class="form-control base64_file4"
                                                                               rows="5"></input>
                                                                        <input type="hidden" name="file_name4"
                                                                               id="file_name4"
                                                                               class="form-control file_name4"
                                                                               rows="5"></input>
                                                                    </div>
                                                                    <!-- /input-group -->
                                                                </div>
                                                                <!-- /.col-lg-6 -->
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <div class="form-group">
                                                                        <label for="attachment_5">Attachment 5</label>
                                                                        <div class="input-group ">
                                                                            <input type="file" name="attachment_5"
                                                                                   class="attachment_5"
                                                                            />
                                                                        </div>
                                                                        <input type="hidden" name="base645"
                                                                               id="base6454"
                                                                               class="form-control base64_file5"
                                                                               rows="5"></input>
                                                                        <input type="hidden" name="file_name5"
                                                                               id="file_name5"
                                                                               class="form-control file_name5"
                                                                               rows="5"></input>
                                                                    </div>
                                                                    <!-- /input-group -->
                                                                </div>
                                                                <!-- /.col-lg-6 -->
                                                                <div class="col-lg-6">
                                                                    <div class="form-group">
                                                                        <label for="attachment_6">Attachment 6</label>
                                                                        <div class="input-group ">
                                                                            <input type="file" name="attachment_6"
                                                                                   class="attachment_6"/>
                                                                        </div>
                                                                        <input type="hidden" name="base646" id="base646"
                                                                               class="form-control base64_file6"
                                                                               rows="5"></input>
                                                                        <input type="hidden" name="file_name6"
                                                                               id="file_name6"
                                                                               class="form-control file_name6"
                                                                               rows="5"></input>
                                                                    </div>
                                                                    <!-- /input-group -->
                                                                </div>
                                                                <!-- /.col-lg-6 -->
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <!-- /.post -->
                                                </div>

                                            </div>
                                            <!-- /.tab-content -->
                                        </div>
                                        <!-- /.card-body -->
                                    </div>
                                    <!-- /.card -->
                                </div>
                            </t>

                        </div>
                        <!-- /.card-body -->

                        <div class="card-footer">
                            <button type="button" class="btn btn-primary new_timeoff_confirm">Submit</button>
                        </div>
                    </form>
                </div>


            </t>

        </template>


        <template id="display_leave_request" name="Display Leave Request">

            <t t-call="portal.portal_layout">
                <div class="row">

                    <div class="col-12">
                        <a href="/my/leave_request/submit"
                           class="btn btn-info">New Leave Request
                        </a>
                    </div>

                </div>

                <t t-set="breadcrumbs_searchbar" t-value="True"/>
                <!-- <t t-set="o_portal_search_panel" t-value="True"/> -->

                <!-- <t t-set="searchbar_inputs" t-value="True"/> -->
                <t t-set="breadcrumbs_searchbar" t-value="True"/>

                <t t-call="portal.portal_searchbar">
                    <!-- <t t-set="breadcrumbs_searchbar" t-value="True"/>
                <t t-set="o_portal_search_panel" t-value="True"/>
                <t t-set="searchbar_inputs" t-value="True"/> -->

                    <t t-set="title">Excuces</t>
                </t>


                <div id="my_request" class="tabcontent">

                    <t t-if="not holidays">
                        <p>There are currently no Holidays.</p>
                    </t>
                    <t t-if="holidays" t-call="portal.portal_table">
                        <thead>
                            <tr class="active">
                                <th>Leave Type</th>
                                <!-- <th>Description</th> -->
                                <th>Start Date</th>
                                <th>End date</th>
                                <th>Number of Days</th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>
                        <t t-foreach="holidays" t-as="holiday">
                            <tr>
                                <td class="text-left">
                                    <a t-attf-href="/my/leave_request/#{holiday.id}">
                                        <span t-field="holiday.holiday_status_id"/>
                                    </a>

                                    <!--                                    <span t-field="holiday.access_token"/>-->
                                </td>
                                <!-- <td>
                                    <span t-field="holiday.name"/>
                                </td> -->
                                <td class="text-left">
                                    <span t-field="holiday.date_from"/>
                                </td>
                                <td>
                                    <span t-field="holiday.date_to"/>
                                </td>
                                <td>
                                    <span t-field="holiday.number_of_days"/>
                                </td>
                                <td class="tx_status">
                                    <t t-if="holiday.state == 'draft'">
                                        <span class="badge badge-pill badge-light">
                                            <i class="fa fa-fw fa-clock-o" aria-label="Draft" title="Draft"
                                               role="img"></i>
                                            <span class="d-none d-md-inline">Draft</span>
                                        </span>
                                    </t>
                                    <t t-if="holiday.state == 'confirm'">
                                        <span class="badge badge-pill badge-info">
                                            <i class="fa fa-fw fa-clock-o" aria-label="Confirm" title="Confirm"
                                               role="img"></i>
                                            <span class="d-none d-md-inline">Confirm</span>
                                        </span>
                                    </t>
                                    <t t-if="holiday.state == 'validate1'">
                                        <span class="badge badge-pill badge-success">
                                            <i class="fa fa-fw fa-check" aria-label="Approve" title="Approve"
                                               role="img"></i>
                                            <span class="d-none d-md-inline">Approved</span>
                                        </span>
                                    </t>
                                    <t t-if="holiday.state == 'validate'">
                                        <span class="badge badge-pill badge-success">
                                            <i class="fa fa-fw fa-check" aria-label="Validate" title="Validate"
                                               role="img"></i>
                                            <span class="d-none d-md-inline">Validated</span>
                                        </span>
                                    </t>

                                    <t t-if="holiday.state == 'refuse'">
                                        <span class="badge badge-pill badge-danger">
                                            <i class="fa fa-fw fa-remove" aria-label="Refuse" title="Refuse"
                                               role="img"></i>
                                            <span class="d-none d-md-inline">Refuse</span>
                                        </span>
                                    </t>
                                </td>
                                <td>
                                    <a class="btn btn-info"
                                       t-att-href="'/web#return_label=Website&amp;model=hr.leave&amp;id=%s&amp;view_type=form' % (holiday.id)"
                                       groups="odoo_leave_request_portal_employee.group_employee_leave">Edit
                                    </a>
                                </td>
                            </tr>
                        </t>
                    </t>
                </div>

            </t>


        </template>

        <template id="not_allowed_leave_request" name="Access Denied">

            <t t-call="portal.portal_layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <h1>You are not Allowed Access This Document</h1>
                        <div>
                            <a t-attf-href="/my/home" class="btn btn-lg btn-primary">
                                Back
                            </a>
                        </div>
                    </div>

                </div>
            </t>
        </template>

        <template id="portal_my_leave" name="My Time Off Request">
            <t t-call="portal.portal_layout">
                <br/>

                <div class="card card-info card-outline">
                    <div class="card-header">

                        <h3 class="card-title">
                            <small class="text-muted">Time Off -</small>
                            <span t-field="timeoff.display_name"/>
                        </h3>

                        <div class="col-md text-md-right">
                            <div class="d-inline-block">
                                <small class="mr-2 mt-1 float-left">
                                    <b>State:</b>
                                </small>
                                <div t-foreach="timeoff" t-as="tf" class="float-left">
                                    <span t-att-class="'badge badge-success' if tf.state=='validate' else ''
                                                       'badge badge-primary' if tf.state=='confirm' else ''
                                                       'badge badge-danger' if tf.state=='cancel' else ''
                                                       'badge badge-warning' if tf.state=='refuse' else ''
                                                       'badge badge-light' if tf.state=='draft' else ''
                                                       'badge badge-info' if tf.state=='validate1' else ''
                                                       " t-field="tf.state"/>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-5 mb-4 mb-lg-0">
                                <div class="border-bottom d-flex justify-content-between py-2 mb-3 align-items-center">
                                    <h5 class="mb-0">
                                        <span class="text-nowrap" t-esc="timeoff.name"/>
                                    </h5>
                                    <button t-if="timeoff.state == 'confirm'" type="button" data-bs-toggle="modal"
                                            data-bs-target=".modal_edit_timeoff"
                                            name='modal_edit_timeoff'
                                            aria-label="Green Savings Summary"
                                            class="btn btn-link btn-sm  bg-gradient-info">
                                        <i class="fas fa-edit"/>
                                        Edit
                                    </button>
                                </div>
                                <div class="row mb-2">
                                    <strong class="col-12 ">Start Date</strong>
                                    <div class="col">
                                        <span t-if="timeoff.request_date_from" t-field="timeoff.request_date_from"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <strong class="col-12 ">End Date</strong>
                                    <div class="col">
                                        <span t-if="timeoff.request_date_to" t-field="timeoff.request_date_to"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <strong class="col-12 ">Time From</strong>
                                    <div class="col">
                                        <span t-if="timeoff.request_hour_from" t-field="timeoff.request_hour_from"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <strong class="col-12 ">Time To</strong>
                                    <div class="col">
                                        <span t-if="timeoff.request_hour_to" t-field="timeoff.request_hour_to"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <strong class="col-12 ">No of days</strong>
                                    <div class="col">
                                        <span t-if="timeoff.number_of_days" t-field="timeoff.number_of_days"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5 mb-4 mb-lg-0">
                                <div class="row mb-2" t-if="timeoff.sub_id">
                                    <strong class="col-12 ">Subs Teacher</strong>
                                    <div class="col">
                                        <span t-if="timeoff.sub_id" t-field="timeoff.sub_id"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.supervision_duties">
                                    <strong class="col-12 ">Supervision Duties</strong>
                                    <div class="col">
                                        <span t-if="timeoff.supervision_duties" t-field="timeoff.supervision_duties"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.room_number">
                                    <strong class="col-12 ">Room Number</strong>
                                    <div class="col">
                                        <span t-if="timeoff.room_number" t-field="timeoff.room_number"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>

                                <div class="row mb-2" t-if="timeoff.teaching_subject">
                                    <strong class="col-12 ">Teaching Subject</strong>
                                    <div class="col">
                                        <span t-if="timeoff.teaching_subject" t-field="timeoff.teaching_subject"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.rotation_day">
                                    <strong class="col-12 ">Rotation Day</strong>
                                    <div class="col">
                                        <span t-if="timeoff.rotation_day" t-field="timeoff.rotation_day"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.Teaching_block">
                                    <strong class="col-12 ">Teaching Block</strong>
                                    <div class="col">
                                        <span t-if="timeoff.Teaching_block" t-field="timeoff.Teaching_block"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.student_special_attention">
                                    <strong class="col-12 ">Student Special Attention</strong>
                                    <div class="col">
                                        <span t-if="timeoff.student_special_attention"
                                              t-field="timeoff.student_special_attention"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.medical_issues">
                                    <strong class="col-12 ">Medical Issue</strong>
                                    <div class="col">
                                        <span t-if="timeoff.medical_issues" t-field="timeoff.medical_issues"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>
                                <div class="row mb-2" t-if="timeoff.teaching_stuff_note">
                                    <strong class="col-12 ">Note</strong>
                                    <div class="col">
                                        <span t-if="timeoff.teaching_stuff_note" t-field="timeoff.teaching_stuff_note"/>
                                        <span t-else="" class="text-muted">-</span>
                                    </div>
                                </div>

                            </div>
                            <div role="dialog" class="modal_edit_timeoff modal fade">
                                <div class="modal-dialog">
                                    <form method="POST" id="leave_form"
                                          class="js_accept_json modal-content js_website_submit_form edit_timeoff_form new_timeoff_form">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input type="hidden" name="timeoff_id" class="timeoff_id"
                                               t-att-value="timeoff.id"/>
                                        <header class="modal-header">
                                            <h4 class="modal-title">Edit Time Off</h4>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </header>
                                        <main class="modal-body" id="sign-dialog">
                                            <div class="form-group">
                                                <label class="col-form-label" for="name">Description</label>
                                                <input type="text" required="required" class="form-control name"
                                                       name="name" t-att-value="timeoff.name"
                                                       placeholder="Description"/>
                                            </div>
                                            <div class="form-group">
                                                <label for="timeoff">Time off Type</label>
                                                <select name="holiday_status_id"
                                                        class="form-control time_off_type_select holiday_status_id"
                                                        required="True">
                                                    <t t-foreach="holiday_types or []" t-as="htype">
                                                        <option t-att-value="htype[0]"
                                                                t-att-selected="htype[0] == timeoff.holiday_status_id.id">
                                                            <t t-esc="htype[1]"/>
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="control-label" for="date_from">From</label>
                                                    <div class="input-group date">
                                                        <input type="date" name="request_date_from"
                                                               required="required"
                                                               class="form-control date_from request_date_from"
                                                               t-att-value="timeoff.request_date_from"
                                                               data-date-format="YYYY-MM-DD"
                                                               placeholder="YYYY-MM-DD"/>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <span class="fa fa-calendar" role="img"
                                                                      aria-label="Calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="control-label" for="date_to">To</label>
                                                    <div class="input-group date">
                                                        <input type="date" name="request_date_to"
                                                               required="required"
                                                               class="form-control date_to request_date_to"
                                                               t-att-value="timeoff.request_date_to"
                                                               data-date-format="YYYY-MM-DD"
                                                               placeholder="YYYY-MM-DD"/>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <span class="fa fa-calendar" role="img"
                                                                      aria-label="Calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label for="lesson_plan_link">Lesson Plan Link</label>
                                                    <input type="text" class="form-control lesson_plan_link"
                                                           t-att-value="timeoff.lesson_plan_link"
                                                           id="lesson_plan_link" name="lesson_plan_link"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-3 mt16 half_day_option">
                                                    <label class="control-label"></label>
                                                    <input type="checkbox" name="request_unit_half"
                                                           id="half_day_input_id"
                                                           t-att-checked="timeoff.request_unit_half"
                                                           class="request_unit_half">
                                                        <label for="half_day" class="control-label">&#160;Half Day
                                                        </label>
                                                    </input>
                                                </div>
                                                <div class="form-group col-md-3 mt16 custom_hrs_option">
                                                    <label class="control-label"></label>
                                                    <input type="checkbox" name="request_unit_hours"
                                                           id="unit_hours_input_id"
                                                           t-att-checked="timeoff.request_unit_hours"
                                                           class="request_unit_hours">
                                                        <label for="unit_hours" class="control-label">&#160;Custom
                                                            Hours
                                                        </label>
                                                    </input>
                                                </div>
                                                <div class="form-group col-md-3 mt16 custom_hour_divs"
                                                     style="display:none;">
                                                    <label class="control-label">From</label>
                                                    <input type="time" t-att-value="timeoff.request_hour_from"
                                                           name="request_hour_from"
                                                           class="form-control select_period_select request_hour_from"/>

                                                    <!--                                                        <select name="request_hour_from"-->
                                                    <!--                                                                t-att-selected="request_hour_from == timeoff.request_hour_from"-->
                                                    <!--                                                                class="form-control select_period_select request_hour_from">-->
                                                    <!--                                                            <option value=""></option>-->
                                                    <!--                                                            <option value="0">12:00 PM</option>-->
                                                    <!--                                                            <option value="0.5">0:30 AM</option>-->

                                                    <!--                                                            <option value="1">1:00 AM</option>-->
                                                    <!--                                                            <option value="1.5">1:30 AM</option>-->

                                                    <!--                                                            <option value="2">2:00 AM</option>-->
                                                    <!--                                                            <option value="2.5">2:30 AM</option>-->

                                                    <!--                                                            <option value="3">3:00 AM</option>-->
                                                    <!--                                                            <option value="3.5">3:30 AM</option>-->

                                                    <!--                                                            <option value="4">4:00 AM</option>-->
                                                    <!--                                                            <option value="4.5">4:30 AM</option>-->

                                                    <!--                                                            <option value="5">5:00 AM</option>-->
                                                    <!--                                                            <option value="5.5">5:30 AM</option>-->

                                                    <!--                                                            <option value="6">6:00 AM</option>-->
                                                    <!--                                                            <option value="6.5">6:30 AM</option>-->

                                                    <!--                                                            <option value="7">7:00 AM</option>-->
                                                    <!--                                                            <option value="7.5">7:30 AM</option>-->

                                                    <!--                                                            <option value="8">8:00 AM</option>-->
                                                    <!--                                                            <option value="8.5">8:30 AM</option>-->

                                                    <!--                                                            <option value="9">9:00 AM</option>-->
                                                    <!--                                                            <option value="9.5">9:30 AM</option>-->

                                                    <!--                                                            <option value="10">10:00 AM</option>-->
                                                    <!--                                                            <option value="10.5">10:30 AM</option>-->

                                                    <!--                                                            <option value="11">11:00 AM</option>-->
                                                    <!--                                                            <option value="11.5">11:30 AM</option>-->

                                                    <!--                                                            <option value="12">12:00 AM</option>-->
                                                    <!--                                                            <option value="12.5">0:30 PM</option>-->

                                                    <!--                                                            <option value="13">1:00 PM</option>-->
                                                    <!--                                                            <option value="13.5">1:30 PM</option>-->

                                                    <!--                                                            <option value="14">2:00 PM</option>-->
                                                    <!--                                                            <option value="14.5">2:30 PM</option>-->

                                                    <!--                                                            <option value="15">3:00 PM</option>-->
                                                    <!--                                                            <option value="15.5">3:30 PM</option>-->

                                                    <!--                                                            <option value="16">4:00 PM</option>-->
                                                    <!--                                                            <option value="16.5">4:30 PM</option>-->

                                                    <!--                                                            <option value="17">5:00 PM</option>-->
                                                    <!--                                                            <option value="17.5">5:30 PM</option>-->

                                                    <!--                                                            <option value="18">6:00 PM</option>-->
                                                    <!--                                                            <option value="18.5">6:30 PM</option>-->

                                                    <!--                                                            <option value="19">7:00 PM</option>-->
                                                    <!--                                                            <option value="19.5">7:30 PM</option>-->

                                                    <!--                                                            <option value="20">8:00 PM</option>-->
                                                    <!--                                                            <option value="20.5">8:30 PM</option>-->

                                                    <!--                                                            <option value="21">9:00 PM</option>-->
                                                    <!--                                                            <option value="21.5">9:30 PM</option>-->

                                                    <!--                                                            <option value="22">10:00 PM</option>-->
                                                    <!--                                                            <option value="22.5">10:30 PM</option>-->

                                                    <!--                                                            <option value="23">11:00 PM</option>-->
                                                    <!--                                                            <option value="23.5">11:30 PM</option>-->
                                                    <!--                                                        </select>-->
                                                </div>
                                                <div class="form-group col-md-3 mt16 custom_hour_divs"
                                                     style="display:none;">
                                                    <label class="control-label">To</label>

                                                    <input type="time" t-att-value="timeoff.request_hour_to"
                                                           name="request_hour_to"
                                                           class="form-control select_period_select request_hour_to"/>

                                                    <!--                                                        <select name="request_hour_to"-->
                                                    <!--                                                                t-att-selected="request_hour_to == timeoff.request_hour_to"-->
                                                    <!--                                                                class="form-control select_period_select request_hour_to">-->
                                                    <!--                                                            <option value=""></option>-->
                                                    <!--                                                            <option value="0">12:00 PM</option>-->
                                                    <!--                                                            <option value="0.5">0:30 AM</option>-->

                                                    <!--                                                            <option value="1">1:00 AM</option>-->
                                                    <!--                                                            <option value="1.5">1:30 AM</option>-->

                                                    <!--                                                            <option value="2">2:00 AM</option>-->
                                                    <!--                                                            <option value="2.5">2:30 AM</option>-->

                                                    <!--                                                            <option value="3">3:00 AM</option>-->
                                                    <!--                                                            <option value="3.5">3:30 AM</option>-->

                                                    <!--                                                            <option value="4">4:00 AM</option>-->
                                                    <!--                                                            <option value="4.5">4:30 AM</option>-->

                                                    <!--                                                            <option value="5">5:00 AM</option>-->
                                                    <!--                                                            <option value="5.5">5:30 AM</option>-->

                                                    <!--                                                            <option value="6">6:00 AM</option>-->
                                                    <!--                                                            <option value="6.5">6:30 AM</option>-->

                                                    <!--                                                            <option value="7">7:00 AM</option>-->
                                                    <!--                                                            <option value="7.5">7:30 AM</option>-->

                                                    <!--                                                            <option value="8">8:00 AM</option>-->
                                                    <!--                                                            <option value="8.5">8:30 AM</option>-->

                                                    <!--                                                            <option value="9">9:00 AM</option>-->
                                                    <!--                                                            <option value="9.5">9:30 AM</option>-->

                                                    <!--                                                            <option value="10">10:00 AM</option>-->
                                                    <!--                                                            <option value="10.5">10:30 AM</option>-->

                                                    <!--                                                            <option value="11">11:00 AM</option>-->
                                                    <!--                                                            <option value="11.5">11:30 AM</option>-->

                                                    <!--                                                            <option value="12">12:00 AM</option>-->
                                                    <!--                                                            <option value="12.5">0:30 PM</option>-->

                                                    <!--                                                            <option value="13">1:00 PM</option>-->
                                                    <!--                                                            <option value="13.5">1:30 PM</option>-->

                                                    <!--                                                            <option value="14">2:00 PM</option>-->
                                                    <!--                                                            <option value="14.5">2:30 PM</option>-->

                                                    <!--                                                            <option value="15">3:00 PM</option>-->
                                                    <!--                                                            <option value="15.5">3:30 PM</option>-->

                                                    <!--                                                            <option value="16">4:00 PM</option>-->
                                                    <!--                                                            <option value="16.5">4:30 PM</option>-->

                                                    <!--                                                            <option value="17">5:00 PM</option>-->
                                                    <!--                                                            <option value="17.5">5:30 PM</option>-->

                                                    <!--                                                            <option value="18">6:00 PM</option>-->
                                                    <!--                                                            <option value="18.5">6:30 PM</option>-->

                                                    <!--                                                            <option value="19">7:00 PM</option>-->
                                                    <!--                                                            <option value="19.5">7:30 PM</option>-->

                                                    <!--                                                            <option value="20">8:00 PM</option>-->
                                                    <!--                                                            <option value="20.5">8:30 PM</option>-->

                                                    <!--                                                            <option value="21">9:00 PM</option>-->
                                                    <!--                                                            <option value="21.5">9:30 PM</option>-->

                                                    <!--                                                            <option value="22">10:00 PM</option>-->
                                                    <!--                                                            <option value="22.5">10:30 PM</option>-->

                                                    <!--                                                            <option value="23">11:00 PM</option>-->
                                                    <!--                                                            <option value="23.5">11:30 PM</option>-->
                                                    <!--                                                        </select>-->
                                                </div>
                                                <div class="form-group col-md-3 mt16 from_period_div"
                                                     id="from_period_div" style="display:none;">
                                                    <label class="control-label">From Period</label>
                                                    <select name="request_date_from_period"
                                                            t-att-value="timeoff.request_date_from_period"
                                                            t-att-selected="request_date_from_period == timeoff.request_date_from_period"
                                                            class="form-control request_date_from_period"
                                                            id="select_from_period">
                                                        <option value="am">Morning</option>
                                                        <option value="pm">Afternoon</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </main>
                                        <footer class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                                Cancel
                                            </button>
                                            <button type="button"
                                                    t-attf-class="btn btn-primary edit_timeoff_confirm">Confirm
                                            </button>
                                        </footer>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card card-info card-outline">
                    <div class="mt32 card-body">
                        <h4>
                            <strong>Message and communication history</strong>
                        </h4>
                        <div class="mt16">
                            <h1 t-esc="object"/>
                            <t t-call="portal.message_thread">
                                <t t-set="object" t-value="timeoff"/>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <!-- Summary Template -->
        <template id="my_leaves_summary" name="My Leaves Summary">
            <t t-call="portal.portal_layout">

                <br/>
                <div class="card card-info card-outline">
                    <div class="card-header">

                        <h3 class="card-title">
                            <span class="text-muted">
                                <i class="fas fa-calendar-alt"></i>
                                Leaves Summary
                            </span>
                        </h3>

                    </div>

                    <div class="card-body">
                        <t t-call="portal.portal_table">

                            <thead>
                                <tr>
                                    <th>Leave Type</th>
                                    <th>Allocation</th>
                                    <th>Leaves Requested</th>
                                    <th>Leaves Taken</th>
                                    <th>Remaining</th>
                                    <th>Summary</th>

                                </tr>
                            </thead>
                            <tbody>
                                <!--                                <span t-esc="timeoffs" />-->
                                <t t-foreach="timeoffs" t-as="timeoff">
                                    <t t-set="need_allocation" t-value="timeoff[2] != 'no'"/>
                                    <t t-set="cl" t-value="'text-muted'"/>
                                    <tr>
                                        <td>
                                            <b>
                                                <span t-esc="timeoff[0]" class="o_timeoff_name"/>
                                            </b>
                                        </td>
                                        <td>
                                            <t t-if="need_allocation"></t>

                                                <span t-esc="timeoff[1]['max_leaves']"/>
                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">Hours</t>
                                                <t t-else="">Days</t>
                                        </td>
                                        <td>
                                            
                                                <span t-esc="float(timeoff[1]['leave_requests'])"
                                                      class="o_timeoff_big o_timeoff_purple"/>

                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">Hours</t>
                                                <t t-else="">Days</t>
                                        </td>
                                        <td>
                                            <t t-if="need_allocation">
                                                <span t-esc="timeoff[1]['leaves_taken']"
                                                      class="o_timeoff_big o_timeoff_purple"/>

                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">

                                                    Hours
                                                </t>
                                                <t t-else="">Days</t>
                                            </t>
                                            <t t-else="">

                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">
                                                    <t t-set="hours" t-value="float(timeoff[1]['leaves_taken'])"/>
                                                    <t t-esc="'%s:%s' % (str(hours).split('.')[0], int(float(str('%.2f' % hours).split('.')[1])/100*60))"/>


                                                    Hours
                                                </t>
                                                <t t-else="">
                                                    <span t-esc="timeoff[1]['leaves_taken']"
                                                          class="o_timeoff_big o_timeoff_purple"/>
                                                    Days
                                                </t>
                                            </t>

                                        </td>
                                        <td>          
                                                <span t-esc="timeoff[1]['virtual_remaining_leaves']"/>
                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">Hours</t>
                                                <t t-else="">Days</t>
                                        </td>
                                        <td>
                                            <t t-if="need_allocation">

                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">
                                                    <t t-set="hours" t-value="float(timeoff[1]['max_leaves'])"/>
                                                    <t t-esc="'%s:%s' % (str(hours).split('.')[0], int(float(str('%.2f' % hours).split('.')[1])/100*60))"/>
                                                    Hours
                                                </t>
                                                <t t-else="">
                                                    <span t-esc="timeoff[1]['leaves_taken']"
                                                          class="o_timeoff_big o_timeoff_purple"/>
                                                    /
                                                    <span widget="float_time" t-esc="timeoff[1]['max_leaves']"/>
                                                    Days
                                                </t>
                                            </t>
                                            <t t-else="">


                                                <t t-if="timeoff[1]['request_unit'] == 'hour'">
                                                    <t t-set="hours" t-value="float(timeoff[1]['leaves_taken'])"/>
                                                    <t t-esc="'%s:%s' % (str(hours).split('.')[0], int(float(str('%.2f' % hours).split('.')[1])/100*60))"/>
                                                    Hours
                                                </t>
                                                <t t-else="">
                                                    <span t-esc="timeoff[1]['leaves_taken']"
                                                          class="o_timeoff_big o_timeoff_purple"/>
                                                    Days
                                                </t>
                                            </t>
                                        </td>

                                    </tr>
                                </t>
                            </tbody>

                        </t>

                    </div>
                </div>
            </t>
        </template>
    </data>
</odoo>
